<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>React - state function</title>
</head>
<body>
    <div id="root"></div>
</body>
<script src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<script type="text/babel">
    const root = document.getElementById("root");

    const App = () => {
        const [Counter, setCounter] = React.useState(0);

        const BtnClickCount = () => {
            /**
            * BtnClickCount 함수는
            * Counter의 현재 값과 Counter를 수정하기 위한 
            * setCounter 함수를 호출하고 있다.

            'setCounter(Counter + 1);'
            * 이전 값을 바탕으로 현재 값을 설정하는 방법 1
        
            * setCounter 함수 호출, 'Counter + 1'의 값을 인자로 전달
            * 변수 Counter로 지정한 현재 state를 이용해서
            * 다음 state를 위한 계산을 수행하고있다.
            * 다만 Counter의 값을 다른 위치에서도 변경이 가능하기 때문에
            * 그리 좋은 방법은 아니다.

            'setCounter("Hello World!");'

            * 이런 식으로 내가 버튼 클릭을 한 횟수를
            * 기억해두는 변수 Counter의 값을
            * 다른 곳에서도 변경할 수 있다.
            * Counter의 값을 문자열 "Hello World"로 변경
            * 버튼을 클릭하면 아래와 같이 변하고
            * 이후 버튼을 눌러도 미동도 없다.

            * '버튼 클릭 횟수 : Hello World회'
            */

            //이전 값을 바탕으로 현재 값을 설정하는 방법 2
            //state 기반으로 계산을 하고 싶다면
            //단순히 변수의 현재 값을 인자로 전달하는 것이 아닌
            //Callback Function을 인자로 전달하고
            //해당 함수를 통해서 state의 값이 현재 값을 바탕으로
            //나오게끔 설정한다.

            //setCounter((currentValue) => currentValue + 1);
            //결과적으로는 처음 썼던 방법과 비슷하게 동작하지만
            //이 방법이 좀 더 안정적이다.
            //React가 'currentValue'가 확실히 현재 값이라는 것을
            //보장한다는데 어떻게 보장을 하는 것일까..?

            //setCounter(Counter)는 useState() 함수의 return 값인
            //배열 [state, stateFunc]에서 state를 할당받은 변수이다.

            //setCounter((CurrentValue) => currentValue + 1)에서
            //인자로 전달된 함수의 매개변수 CurrentValue는
            //useState()의 결과로 나온 [state, stateFunc]의
            //'state'를 참조한다고 한다.

            //이를 바탕으로 정리해보자면
            //setCounter(Counter)는 'state'를 할당받은
            //변수 Counter를 한 번 거쳐서 state를 참조하지만

            //setCounter((currentValue) => currentValue + 1)에서
            //인자로 전달된 콜백 함수의 매개변수 currentValue는
            //useState의 'state' 그 자체를 직접적으로 참조한다.

            //.....
            //역시 아직은 잘 모르겠다.

            setCounter(Counter + 1);
        };

        return (
            <div>
                <h4>Click Here 👇</h4>
                <button onClick={BtnClickCount}>Click !</button>
                <p>버튼 클릭 횟수 : {Counter}회</p>
            </div>
        );
    };

    ReactDOM.render(<App />, root);
</script>
</html>